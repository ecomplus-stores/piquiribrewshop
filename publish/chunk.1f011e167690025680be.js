(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{225:function(t,e,a){var i=a(231);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("9248a57e",i,!0,{})},227:function(t,e,a){"use strict";e.a=(t,e)=>t.sort(((t,a)=>{if(t.app_id===a.app_id)return 0;const i=e.indexOf(t.app_id),s=e.indexOf(a.app_id);return i>-1?s>-1?i<s?-1:1:i>-1?-1:1:s>-1?1:0}))},230:function(t,e,a){"use strict";a(225)},231:function(t,e,a){(e=a(159)(!0)).push([t.i,".shipping-calculator__input{max-width:150px}.shipping-calculator__services{font-size:var(--font-size-sm);max-width:370px}.shipping-calculator__services .active{cursor:auto}.shipping-calculator__label{padding:var(--spacer-3) var(--spacer-2)}.shipping-calculator__label i{animation-duration:2s;animation-iteration-count:infinite;color:var(--primary-light);font-size:var(--font-size-lg);margin-right:var(--spacer-2)}.shipping-calculator__option{display:flex;justify-content:space-between;width:100%}.shipping-calculator__option>small{min-width:70px;text-align:right}@media(min-width:1200px){.shipping-calculator__option{display:block;position:relative}.shipping-calculator__option>small{position:absolute;right:-5px;top:-5px}}.shipping-calculator__free-from-value{margin-top:var(--spacer-2)}.shipping-calculator__free-from-value .progress{height:1.5rem;margin-top:var(--spacer-1)}.shipping-calculator__free-from-value .progress-bar{background-color:var(--info)}","",{version:3,sources:["ShippingCalculator.scss"],names:[],mappings:"AAAA,4BAA4B,eAAe,CAAC,+BAA+B,6BAA6B,CAAC,eAAe,CAAC,uCAAuC,WAAW,CAAC,4BAA4B,uCAAuC,CAAC,8BAA8B,qBAAqB,CAAC,kCAAkC,CAAC,0BAA0B,CAAC,6BAA6B,CAAC,4BAA4B,CAAC,6BAA6B,YAAY,CAAC,6BAA6B,CAAC,UAAU,CAAC,mCAAmC,cAAc,CAAC,gBAAgB,CAAC,yBAAyB,6BAA6B,aAAa,CAAC,iBAAiB,CAAC,mCAAmC,iBAAiB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,sCAAsC,0BAA0B,CAAC,gDAAgD,aAAa,CAAC,0BAA0B,CAAC,oDAAoD,4BAA4B",file:"ShippingCalculator.scss",sourcesContent:[".shipping-calculator__input{max-width:150px}.shipping-calculator__services{font-size:var(--font-size-sm);max-width:370px}.shipping-calculator__services .active{cursor:auto}.shipping-calculator__label{padding:var(--spacer-3) var(--spacer-2)}.shipping-calculator__label i{animation-duration:2s;animation-iteration-count:infinite;color:var(--primary-light);font-size:var(--font-size-lg);margin-right:var(--spacer-2)}.shipping-calculator__option{display:flex;justify-content:space-between;width:100%}.shipping-calculator__option>small{min-width:70px;text-align:right}@media(min-width:1200px){.shipping-calculator__option{display:block;position:relative}.shipping-calculator__option>small{position:absolute;right:-5px;top:-5px}}.shipping-calculator__free-from-value{margin-top:var(--spacer-2)}.shipping-calculator__free-from-value .progress{height:1.5rem;margin-top:var(--spacer-1)}.shipping-calculator__free-from-value .progress-bar{background-color:var(--info)}"]}]),t.exports=e},236:function(t,e,a){"use strict";var i=a(233),s=a(224),n=(a(230),a(46)),r=Object(n.a)(s.a,i.a,i.b,!1,null,null,null);e.a=r.exports},243:function(t,e,a){"use strict";var i={name:"ItemCustomizations",props:{item:{type:Object,required:!0}}},s=a(46),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.item.customizations&&t.item.customizations.length?a("div",{staticClass:"item-customizations small"},t._l(t.item.customizations,(function(e){var i=e._id,s=e.label,n=e.option;return a("div",{key:"cs-"+i},[a("span",{staticClass:"text-muted"},[t._v(" "+t._s(s)+": ")]),t._v(" "+t._s(n.text)+" ")])})),0):t._e()}),[],!1,null,null,null);e.a=n.exports},244:function(t,e,a){"use strict";e.a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;return window.scroll({top:e,behavior:"smooth"})}},249:function(t,e,a){var i=a(260);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("25d3c122",i,!0,{})},251:function(t,e,a){var i=a(265);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("1c98343a",i,!0,{})},259:function(t,e,a){"use strict";a(249)},260:function(t,e,a){(e=a(159)(!0)).push([t.i,".discount-applier{max-width:30rem}.discount-applier__intro{color:var(--secondary)}.discount-applier .alert,.discount-applier__form{margin-top:var(--spacer-3)}.discount-applier .alert{font-size:var(--font-size-sm)}.discount-applier__input{max-width:200px}","",{version:3,sources:["DiscountApplier.scss"],names:[],mappings:"AAAA,kBAAkB,eAAe,CAAC,yBAAyB,sBAAsB,CAAC,iDAAiD,0BAA0B,CAAC,yBAAyB,6BAA6B,CAAC,yBAAyB,eAAe",file:"DiscountApplier.scss",sourcesContent:[".discount-applier{max-width:30rem}.discount-applier__intro{color:var(--secondary)}.discount-applier .alert,.discount-applier__form{margin-top:var(--spacer-3)}.discount-applier .alert{font-size:var(--font-size-sm)}.discount-applier__input{max-width:200px}"]}]),t.exports=e},263:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expirationYear=void 0;function i(t,e,a){return{isValid:t,isPotentiallyValid:e,isCurrentYear:a||!1}}e.expirationYear=function(t,e){var a;if(void 0===e&&(e=19),"string"!=typeof t)return i(!1,!1);if(""===t.replace(/\s/g,""))return i(!1,!0);if(!/^\d*$/.test(t))return i(!1,!1);var s=t.length;if(s<2)return i(!1,!0);var n=(new Date).getFullYear();if(3===s)return i(!1,t.slice(0,2)===String(n).slice(0,2));if(s>4)return i(!1,!1);var r=parseInt(t,10),o=Number(String(n).substr(2,2)),c=!1;if(2===s){if(String(n).substr(0,2)===t)return i(!1,!0);a=o===r,c=r>=o&&r<=o+e}else 4===s&&(a=n===r,c=r>=n&&r<=n+e);return i(c,c,a)}},264:function(t,e,a){"use strict";a(251)},265:function(t,e,a){(e=a(159)(!0)).push([t.i,".summary__item{align-items:flex-start;display:flex;margin-bottom:.5rem;overflow-x:hidden}.summary__item a{color:inherit}.summary__item picture{flex:0 0 70px;height:auto;margin-right:.5rem;width:70px}.summary__item picture img{border-radius:var(--border-radius)}.summary__item small{display:inline-block;line-height:1.3}.summary__amount{border-top:1px dotted var(--gray);margin:1rem 0 1.5rem;padding:.75rem 0}.summary__amount:last-child{margin-bottom:0;padding-bottom:0}.summary__amount__row{align-items:center;display:flex;justify-content:space-between;margin-top:.25rem}.summary__amount__row>span{font-weight:300}.summary__amount__row>span small{color:var(--gray);display:block;line-height:1.15}.summary__amount__row--total{font-size:1.25rem;margin-top:.5rem}.summary__amount__row--total>div{font-weight:700}.summary__amount__row--total strong{color:var(--secondary)}.summary .prices{text-align:right}","",{version:3,sources:["EcSummary.scss"],names:[],mappings:"AAAA,eAAe,sBAAsB,CAAC,YAAY,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,iBAAiB,aAAa,CAAC,uBAAuB,aAAa,CAAC,WAAW,CAAC,kBAAkB,CAAC,UAAU,CAAC,2BAA2B,kCAAkC,CAAC,qBAAqB,oBAAoB,CAAC,eAAe,CAAC,iBAAiB,iCAAiC,CAAC,oBAAoB,CAAC,gBAAgB,CAAC,4BAA4B,eAAe,CAAC,gBAAgB,CAAC,sBAAsB,kBAAkB,CAAC,YAAY,CAAC,6BAA6B,CAAC,iBAAiB,CAAC,2BAA2B,eAAe,CAAC,iCAAiC,iBAAiB,CAAC,aAAa,CAAC,gBAAgB,CAAC,6BAA6B,iBAAiB,CAAC,gBAAgB,CAAC,iCAAiC,eAAe,CAAC,oCAAoC,sBAAsB,CAAC,iBAAiB,gBAAgB",file:"EcSummary.scss",sourcesContent:[".summary__item{align-items:flex-start;display:flex;margin-bottom:.5rem;overflow-x:hidden}.summary__item a{color:inherit}.summary__item picture{flex:0 0 70px;height:auto;margin-right:.5rem;width:70px}.summary__item picture img{border-radius:var(--border-radius)}.summary__item small{display:inline-block;line-height:1.3}.summary__amount{border-top:1px dotted var(--gray);margin:1rem 0 1.5rem;padding:.75rem 0}.summary__amount:last-child{margin-bottom:0;padding-bottom:0}.summary__amount__row{align-items:center;display:flex;justify-content:space-between;margin-top:.25rem}.summary__amount__row>span{font-weight:300}.summary__amount__row>span small{color:var(--gray);display:block;line-height:1.15}.summary__amount__row--total{font-size:1.25rem;margin-top:.5rem}.summary__amount__row--total>div{font-weight:700}.summary__amount__row--total strong{color:var(--secondary)}.summary .prices{text-align:right}"]}]),t.exports=e},273:function(t,e,a){"use strict";a(96);var i=a(26),s=a(35),n=a(75),r=a(4),o=a(8),c=a(28),l=a(228);var u={name:"DiscountApplier",components:{AAlert:l.a},props:{amount:Object,couponCode:String,hasCouponInput:{type:Boolean,default:!0},isFormAlwaysVisible:Boolean,isCouponApplied:Boolean,isAttentionWanted:Boolean,canAddFreebieItems:{type:Boolean,default:!0},modulesPayload:Object,ecomCart:{type:Object,default:()=>o.a},customer:Object,canPassManyDiscountApps:Boolean,ecomPassport:{type:Object,default:()=>c.a}},data(){return{alertText:null,alertVariant:null,isFormVisible:this.isFormAlwaysVisible||this.couponCode,isLoading:!1,localCouponCode:this.couponCode,localAmountTotal:null,isUpdateSheduled:!1}},computed:{i19add$1ToGetDiscountMsg:()=>Object(s.a)({en_us:"Add more $1 to cart to get the discount.",pt_br:"Adicione mais $1 ao carrinho para ganhar o desconto."}),i19add:()=>Object(s.a)(i.i),i19addDiscountCoupon:()=>Object(s.a)(i.k),i19code:()=>Object(s.a)(i.R),i19couponAppliedMsg:()=>Object(s.a)(i.eb),i19discountCoupon:()=>Object(s.a)(i.jb),i19hasCouponOrVoucherQn:()=>Object(s.a)(i.Lb),i19invalidCouponMsg:()=>Object(s.a)(i.Xb),i19campaignAppliedMsg:()=>Object(s.a)(i.F),canAddCoupon(){return!this.couponCode||!this.isCouponApplied||this.couponCode!==this.localCouponCode}},methods:{fixAmount(){const t=this.amount||{subtotal:this.ecomCart.data.subtotal};this.localAmountTotal=(t.subtotal||0)+(t.freight||0)},parseDiscountOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;if(t.length){let a,i,s;t.forEach((t=>{const{validated:o,error:c,response:l}=t;if(o&&!c){const o=l.discount_rule;if(o)if(this.canPassManyDiscountApps)e?(o.extra_discount.value+=e,a=o):a={app_id:t.app_id,...o},e=o.extra_discount.value;else{const i=o.extra_discount.value;e>i||(e=i,a={app_id:t.app_id,...o})}else l.available_extra_discount&&l.available_extra_discount.min_amount&&(i=this.i19add$1ToGetDiscountMsg.replace("$1",Object(n.a)(l.available_extra_discount.min_amount-this.amount.subtotal)),s="info");l.invalid_coupon_message&&(i=l.invalid_coupon_message),this.canAddFreebieItems&&(u=this.ecomCart,d=l.freebie_product_ids,Array.isArray(d)?(u.data.items.forEach((t=>{let{_id:e,product_id:a,flags:i}=t;i&&i.includes("freebie")&&!d.includes(a)&&u.removeItem(e)})),d.forEach((t=>{!u.data.items.find((e=>e.product_id===t&&e.flags&&e.flags.includes("freebie")))&&Object(r.g)({url:`/products/${t}.json`}).then((e=>{let{data:a}=e;!(a.quantity>0)||a.variations&&a.variations.length||u.addProduct({...a,flags:["freebie","__tmp"]},null,d.reduce(((e,a)=>a===t?e+1:e),0))})).catch(console.error)}))):u.data&&u.data.items&&u.data.items.length&&u.data.items.forEach((t=>{let{_id:e,flags:a}=t;a&&a.includes("freebie")&&u.removeItem(e)})))}var u,d})),e?(this.localCouponCode?i?(this.alertText=i,this.alertVariant=s||"warning"):(this.$emit("update:coupon-code",this.localCouponCode),this.alertText=this.i19couponAppliedMsg,this.alertVariant="info"):(this.alertText=this.i19campaignAppliedMsg,this.alertVariant="info"),this.$emit("set-discount-rule",a)):(this.localCouponCode?(this.alertText=i||this.i19invalidCouponMsg,this.alertVariant=s||"warning"):this.alertText=null,this.$emit("set-discount-rule",{}))}},fetchDiscountOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isLoading=!0;const e=this.customer||this.ecomPassport.getCustomer();e&&(e._id||e.doc_number)&&(t.customer={},e._id&&(t.customer._id=e._id),e.display_name&&(t.customer.display_name=e.display_name),e.doc_number&&(t.customer.doc_number=e.doc_number)),Object(r.c)({url:"/apply_discount.json",method:"POST",data:{...this.modulesPayload,amount:{subtotal:this.localAmountTotal,...this.amount,total:this.localAmountTotal,discount:0},items:this.ecomCart.data.items,...t}}).then((t=>{let{data:e}=t;return this.parseDiscountOptions(e.result)})).catch((t=>{console.error(t),this.alertVariant="danger",this.alertText=Object(s.a)(i.wb)})).finally((()=>{this.isLoading=!1}))},submitCoupon(t){if(t||this.canAddCoupon){const{localCouponCode:t}=this,e={discount_coupon:t};this.fetchDiscountOptions(e)}},updateDiscount(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.couponCode?!t&&this.isCouponApplied||this.submitCoupon(t):(t||!this.isUpdateSheduled&&this.amount&&this.localAmountTotal)&&this.fetchDiscountOptions()}},watch:{couponCode(t){t!==this.couponCode&&(this.localCouponCode=t,t&&!this.isFormVisible&&(this.isFormVisible=!0))},isFormAlwaysVisible(t){t&&(this.isFormVisible=!0)},isFormVisible(t){t&&this.$nextTick((()=>{this.$refs.input.focus()}))},localAmountTotal(t,e){null!==e&&Math.abs(t-e)>.01&&!this.isUpdateSheduled&&(this.isUpdateSheduled=!0,this.$nextTick((()=>{setTimeout((()=>{this.updateDiscount(),this.isUpdateSheduled=!1}),600)})))},amount:{handler(){this.fixAmount()},deep:!0}},mounted(){this.fixAmount(),this.updateDiscount(!1)}},d=u,p=(a(259),a(46)),m=Object(p.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"discount-applier"},[t.hasCouponInput?[a("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated position-absolute fadeOutUp"}},[t.isFormVisible?a("form",{key:"form",staticClass:"discount-applier__form",on:{submit:function(e){return e.preventDefault(),t.submitCoupon.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"discount-applier-coupon"}},[t._v(" "+t._s(t.i19discountCoupon)+" ")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.localCouponCode,expression:"localCouponCode"}],ref:"input",staticClass:"form-control discount-applier__input",attrs:{type:"text",id:"discount-applier-coupon",required:"",readonly:t.isLoading,placeholder:t.i19code,"aria-label":t.i19code},domProps:{value:t.localCouponCode},on:{input:function(e){e.target.composing||(t.localCouponCode=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[t.isLoading?a("span",{staticClass:"input-group-text"},[a("span",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t.canAddCoupon?a("button",{key:"add",staticClass:"btn btn-outline-secondary",attrs:{type:"submit"}},[t._v(" "+t._s(t.i19add)+" ")]):a("button",{key:"applied",staticClass:"btn btn-outline-success",attrs:{disabled:"",type:"button"}},[a("i",{staticClass:"i-check-circle"})])])])])]):a("div",{key:"button"},[t.isAttentionWanted?a("h6",{staticClass:"discount-applier__intro"},[t._v(" "+t._s(t.i19hasCouponOrVoucherQn)+" ")]):t._e(),a("button",{staticClass:"discount-applier__coupon-btn btn btn-sm",class:"btn-"+(t.isAttentionWanted?"secondary":"light"),attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.isFormVisible=!t.isFormVisible}}},[a("i",{staticClass:"i-tag mr-1"}),t._v(" "+t._s(t.i19addDiscountCoupon)+" ")])])])]:t._e(),a("a-alert",{key:"alert-"+t.alertVariant,attrs:{"can-show":!t.isLoading&&Boolean(t.alertText),variant:t.alertVariant},on:{dismiss:function(e){t.alertText=null}}},[t._v(" "+t._s(t.alertText)+" ")])],2)}),[],!1,null,null,null);e.a=m.exports},274:function(t,e,a){"use strict";var i=a(26),s=a(35),n=a(91),r=a(23),o=a(29),c=a(75),l=a(89),u=a(173),d=a(175),p=a(174),m=a(243),h={name:"EcSummary",components:{ALink:u.a,APicture:d.a,APrices:p.a,ItemCustomizations:m.a},props:{amount:{type:Object,required:!0},items:Array,buyer:Object,shippingAddress:Object,canShowPriceOptions:Boolean,paidInAdvance:{type:Number,default:0}},computed:{i19balanceOrPoints:()=>Object(s.a)(i.u),i19buyer:()=>Object(s.a)(i.D),i19contactPhone:()=>Object(s.a)(i.X),i19discount:()=>Object(s.a)(i.ib),i19docNumber:()=>Object(s.a)(i.mb),i19freebie:()=>Object(s.a)(i.Eb),i19freight:()=>Object(s.a)(i.Fb),i19myAccount:()=>Object(s.a)(i.oc),i19subtotal:()=>Object(s.a)(i.ae),i19summary:()=>Object(s.a)(i.be),i19toPay:()=>Object(s.a)(i.ee),i19total:()=>Object(s.a)(i.fe),amountToPay(){return this.amount.total-this.paidInAdvance},buyerName(){if(!this.buyer||!this.buyer.name)return"";const{name:t}=this.buyer;return`${t.given_name} ${t.middle_name||""} ${t.family_name}`},buyerPhone(){const t=Object(n.a)(this.buyer);return t&&/000\d{2}/.test(t)?t.replace("000","***"):t}},methods:{getName:r.a,getPrice:o.a,formatMoney:c.a,getImg:t=>Object(l.a)(t,null,"small")}},A=(a(264),a(46)),_=Object(A.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"summary"},[a("h5",{staticClass:"summary__title"},[t._v(" "+t._s(t.i19summary)+" ")]),t._t("list",(function(){return[t.items?a("div",{staticClass:"summary__list"},t._l(t.items,(function(e){return e.quantity>0?a("div",{key:e._id,staticClass:"summary__item"},[t.getImg(e)?a("a-picture",{attrs:{src:t.getImg(e).url,alt:t.getImg(e).alt||e.name}}):t._e(),a("div",[a("span",{staticClass:"badge badge-secondary"},[t._v(" "+t._s(e.quantity)+" ")]),Array.isArray(e.flags)&&e.flags.includes("freebie")?[a("s",[t._v(t._s(t.formatMoney(t.getPrice(e))))]),a("small",{staticClass:"text-muted"},[a("i",{staticClass:"i-gift ml-2 mr-1"}),t._v(" "+t._s(t.i19freebie)+" ")])]:[t._v(" "+t._s(t.formatMoney(t.getPrice(e)))+" ")],a("br"),e.slug?a("a-link",{attrs:{href:"/"+e.slug,target:"_blank"}},[a("small",[t._v(t._s(t.getName(e)))])]):a("small",[t._v(" "+t._s(t.getName(e))+" ")]),a("item-customizations",{attrs:{item:e}})],2)],1):t._e()})),0):t._e()]})),t._t("more-offers"),t._t("amount",(function(){return[a("div",{staticClass:"summary__amount"},[a("div",{staticClass:"summary__amount__row",attrs:{"data-subtotal":t.amount.subtotal.toFixed(2)}},[a("span",[t._v(t._s(t.i19subtotal))]),a("div",[t._v(t._s(t.formatMoney(t.amount.subtotal)))])]),a("div",{staticClass:"summary__amount__row",attrs:{"data-freight":t.amount.freight.toFixed(2)}},[a("span",[t._v(" "+t._s(t.i19freight)+" "),t.shippingAddress?a("small",[t._v(" "+t._s(t.shippingAddress.street)+" "),t.shippingAddress.number?[t._v(" "+t._s(t.shippingAddress.number)+" ")]:t._e(),t._v(" "+t._s(t.shippingAddress.city)+" "+t._s(t.shippingAddress.province_code)+" ")],2):t._e()]),a("div",[t._v(t._s(t.formatMoney(t.amount.freight)))])]),t.amount.discount?a("div",{staticClass:"summary__amount__row",attrs:{"data-discount":t.amount.discount.toFixed(2)}},[a("span",[t._v(t._s(t.i19discount))]),a("div",[t._v(t._s(t.formatMoney(t.amount.discount)))])]):t._e(),t.amount.balance?a("div",{staticClass:"summary__amount__row",attrs:{"data-balance":t.amount.balance.toFixed(2)}},[a("span",[t._v(t._s(t.i19balanceOrPoints))]),a("div",[t._v(t._s(t.formatMoney(t.amount.balance)))])]):t._e(),t.paidInAdvance>0?a("div",{staticClass:"summary__amount__row"},[a("span",[t._v(t._s(t.i19total))]),a("div",[t._v(t._s(t.formatMoney(t.amount.total)))])]):t._e(),t._t("amount-custom"),a("div",{staticClass:"summary__amount__row summary__amount__row--total",attrs:{"data-total":t.amountToPay.toFixed(2)}},[a("span",[t._v(t._s(t.paidInAdvance?t.i19toPay:t.i19total))]),a("a-prices",{attrs:{product:{price:t.amountToPay},"discount-option":{value:t.amount.discount},"is-literal":!0,"is-amount-total":!0,"can-show-price-options":t.canShowPriceOptions}})],1)],2)]})),t._t("default"),t._t("buyer",(function(){return[t.buyer?a("div",{staticClass:"summary__buyer"},[a("h5",[t._v(t._s(t.i19buyer))]),a("p",[t._v(" "+t._s(t.buyerName)+" "),a("br"),a("small",[t._v(t._s(t.i19docNumber)+":")]),a("span",[t._v(t._s(t.buyer.doc_number))]),a("br"),a("small",[t._v(t._s(t.i19contactPhone)+":")]),a("span",[t._v(t._s(t.buyerPhone))]),a("br"),a("small",[t._v(t._s(t.buyer.main_email))])]),a("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.$emit("click:account")}}},[a("i",{staticClass:"i-pencil mr-1"}),t._v(" "+t._s(t.i19myAccount)+" ")])]):t._e()]}))],2)}),[],!1,null,null,null);e.a=_.exports},302:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__);const startedScriptsRefs=[];__webpack_exports__.a=(jsClient,skipOnloadExpression)=>{const src=jsClient.script_uri;let scriptRef=startedScriptsRefs.find((t=>t.src===src)),$script;return scriptRef?$script=scriptRef.$script:($script=document.createElement("script"),$script.async=!0,$script.defer=!0,scriptRef={src:src,$script:$script,resolves:[]},startedScriptsRefs.push(scriptRef),setTimeout((()=>{$script.setAttribute("src",src),document.head.appendChild($script)}),150*Math.random()+50)),new Promise((resolve=>{$script.onload=()=>{scriptRef.isLoaded=!0;let expression=jsClient.onload_expression;const runExpression=checkoutData=>{if(window._checkout=checkoutData,Object.assign(window.storefrontApp,window._checkout),expression){try{eval(expression)}catch(t){console.error(t,expression)}jsClient.container_html||(expression=null)}};skipOnloadExpression?scriptRef.resolves.forEach((t=>t(runExpression))):(runExpression(),scriptRef.resolves.forEach((t=>t())))},scriptRef.resolves.push(resolve),scriptRef.isLoaded&&$script.onload()}))}},303:function(t,e,a){"use strict";function i(t,e,a){return{isValid:t,isPotentiallyValid:e,isValidForThisYear:a||!1}}Object.defineProperty(e,"__esModule",{value:!0}),e.expirationMonth=void 0,e.expirationMonth=function(t){var e=(new Date).getMonth()+1;if("string"!=typeof t)return i(!1,!1);if(""===t.replace(/\s/g,"")||"0"===t)return i(!1,!0);if(!/^\d*$/.test(t))return i(!1,!1);var a=parseInt(t,10);if(isNaN(Number(t)))return i(!1,!1);var s=a>0&&a<13;return i(s,s,s&&a>=e)}},304:function(t,e,a){var i=a(393);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("5c89a8a0",i,!0,{})},305:function(t,e,a){var i=a(395);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("1b630700",i,!0,{})},310:function(t,e,a){var i=a(405);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(160).default)("7b070f00",i,!0,{})},383:function(t,e,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,a,i){void 0===i&&(i=a),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[a]}})}:function(t,e,a,i){void 0===i&&(i=a),t[i]=e[a]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=(this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)"default"!==a&&Object.prototype.hasOwnProperty.call(t,a)&&i(e,t,a);return s(e,t),e})(a(179)),r=a(384),o=a(385),c=a(387),l=a(303),u=a(263),d=a(390),p=a(391),m={creditCardType:n,cardholderName:r.cardholderName,number:o.cardNumber,expirationDate:c.expirationDate,expirationMonth:l.expirationMonth,expirationYear:u.expirationYear,cvv:d.cvv,postalCode:p.postalCode};t.exports=m},384:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cardholderName=void 0;var i=/^[\d\s-]*$/;function s(t,e){return{isValid:t,isPotentiallyValid:e}}e.cardholderName=function(t){return"string"!=typeof t?s(!1,!1):0===t.length?s(!1,!0):t.length>255?s(!1,!1):i.test(t)?s(!1,!0):s(!0,!0)}},385:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cardNumber=void 0;var i=a(386),s=a(179);function n(t,e,a){return{card:t,isPotentiallyValid:e,isValid:a}}e.cardNumber=function(t,e){var a,r;if(void 0===e&&(e={}),"string"!=typeof t&&"number"!=typeof t)return n(null,!1,!1);var o=String(t).replace(/-|\s/g,"");if(!/^\d*$/.test(o))return n(null,!1,!1);var c=s(o);if(0===c.length)return n(null,!1,!1);if(1!==c.length)return n(null,!0,!1);var l=c[0];if(e.maxLength&&o.length>e.maxLength)return n(l,!1,!1);a=l.type===s.types.UNIONPAY&&!0!==e.luhnValidateUnionPay||i(o),r=Math.max.apply(null,l.lengths),e.maxLength&&(r=Math.min(e.maxLength,r));for(var u=0;u<l.lengths.length;u++)if(l.lengths[u]===o.length)return n(l,o.length<r||a,a);return n(l,o.length<r,!1)}},386:function(t,e,a){"use strict";t.exports=function(t){for(var e,a=0,i=!1,s=t.length-1;s>=0;)e=parseInt(t.charAt(s),10),i&&(e*=2)>9&&(e=e%10+1),i=!i,a+=e,s--;return a%10==0}},387:function(t,e,a){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++)for(var s in e=arguments[a])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.expirationDate=void 0;var s=a(388),n=a(303),r=a(263);function o(t,e,a,i){return{isValid:t,isPotentiallyValid:e,month:a,year:i}}e.expirationDate=function(t,e){var a;if("string"==typeof t)t=t.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2"),a=s.parseDate(String(t));else{if(null===t||"object"!=typeof t)return o(!1,!1,null,null);var c=i({},t);a={month:String(c.month),year:String(c.year)}}var l=n.expirationMonth(a.month),u=r.expirationYear(a.year,e);if(l.isValid){if(u.isCurrentYear){var d=l.isValidForThisYear;return o(d,d,a.month,a.year)}if(u.isValid)return o(!0,!0,a.month,a.year)}return l.isPotentiallyValid&&u.isPotentiallyValid?o(!1,!0,null,null):o(!1,!1,null,null)}},388:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDate=void 0;var i=a(263),s=a(389);e.parseDate=function(t){var e;if(/^\d{4}-\d{1,2}$/.test(t)?e=t.split("-").reverse():/\//.test(t)?e=t.split(/\s*\/\s*/g):/\s/.test(t)&&(e=t.split(/ +/g)),s.isArray(e))return{month:e[0]||"",year:e.slice(1).join()};var a,n,r,o=(a=t,0===(r=Number(a[0]))?2:r>1||1===r&&Number(a[1])>2?1:1===r?(n=a.substr(1),i.expirationYear(n).isPotentiallyValid?1:2):5===a.length?1:a.length>5?2:1),c=t.substr(0,o);return{month:c,year:t.substr(c.length)}}},389:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},390:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cvv=void 0;var i=3;function s(t,e){return{isValid:t,isPotentiallyValid:e}}e.cvv=function(t,e){return void 0===e&&(e=i),e=e instanceof Array?e:[e],"string"!=typeof t?s(!1,!1):/^\d*$/.test(t)?function(t,e){for(var a=0;a<t.length;a++)if(e===t[a])return!0;return!1}(e,t.length)?s(!0,!0):t.length<Math.min.apply(null,e)?s(!1,!0):t.length>function(t){for(var e=i,a=0;a<t.length;a++)e=t[a]>e?t[a]:e;return e}(e)?s(!1,!1):s(!0,!0):s(!1,!1)}},391:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postalCode=void 0;function i(t,e){return{isValid:t,isPotentiallyValid:e}}e.postalCode=function(t,e){void 0===e&&(e={});var a=e.minLength||3;return"string"!=typeof t?i(!1,!1):t.length<a?i(!1,!0):i(!0,!0)}},392:function(t,e,a){"use strict";a(304)},393:function(t,e,a){(e=a(159)(!0)).push([t.i,".credit-card__bin .pay-icon{margin:-2px 0}.credit-card__name input{text-transform:uppercase}.credit-card__loading{align-items:center;background-color:var(--white);display:flex;height:80%;justify-content:center;opacity:.8;position:absolute;width:95%;z-index:1}","",{version:3,sources:["CreditCardForm.scss"],names:[],mappings:"AAAA,4BAA4B,aAAa,CAAC,yBAAyB,wBAAwB,CAAC,sBAAsB,kBAAkB,CAAC,6BAA6B,CAAC,YAAY,CAAC,UAAU,CAAC,sBAAsB,CAAC,UAAU,CAAC,iBAAiB,CAAC,SAAS,CAAC,SAAS",file:"CreditCardForm.scss",sourcesContent:[".credit-card__bin .pay-icon{margin:-2px 0}.credit-card__name input{text-transform:uppercase}.credit-card__loading{align-items:center;background-color:var(--white);display:flex;height:80%;justify-content:center;opacity:.8;position:absolute;width:95%;z-index:1}"]}]),t.exports=e},394:function(t,e,a){"use strict";a(305)},395:function(t,e,a){(e=a(159)(!0)).push([t.i,".payment__loading{padding-top:4rem;text-align:center;width:100%}.payment__loading>div{height:6rem;width:6rem}.payment__head{display:flex;justify-content:space-between}.payment__icon{margin-left:.25rem;text-align:center;width:2em}.payment__text{color:var(--gray);display:block;font-size:.9rem;margin-top:.25rem}.payment__badges{display:inline-block;text-transform:lowercase}.payment__badges .badge{margin-right:.25rem}.payment__discount-value{text-transform:uppercase}.payment__stamp{margin:.75rem auto 0;max-width:100%}.payment__back,.payment__intermediator{color:var(--gray)}.payment__back{font-size:.85rem;padding:.15rem}.payment__back:hover{color:var(--black)}.payment__back:focus{outline:none}","",{version:3,sources:["PaymentMethods.scss"],names:[],mappings:"AAAA,kBAAkB,gBAAgB,CAAC,iBAAiB,CAAC,UAAU,CAAC,sBAAsB,WAAW,CAAC,UAAU,CAAC,eAAe,YAAY,CAAC,6BAA6B,CAAC,eAAe,kBAAkB,CAAC,iBAAiB,CAAC,SAAS,CAAC,eAAe,iBAAiB,CAAC,aAAa,CAAC,eAAe,CAAC,iBAAiB,CAAC,iBAAiB,oBAAoB,CAAC,wBAAwB,CAAC,wBAAwB,mBAAmB,CAAC,yBAAyB,wBAAwB,CAAC,gBAAgB,oBAAoB,CAAC,cAAc,CAAC,uCAAuC,iBAAiB,CAAC,eAAe,gBAAgB,CAAC,cAAc,CAAC,qBAAqB,kBAAkB,CAAC,qBAAqB,YAAY",file:"PaymentMethods.scss",sourcesContent:[".payment__loading{padding-top:4rem;text-align:center;width:100%}.payment__loading>div{height:6rem;width:6rem}.payment__head{display:flex;justify-content:space-between}.payment__icon{margin-left:.25rem;text-align:center;width:2em}.payment__text{color:var(--gray);display:block;font-size:.9rem;margin-top:.25rem}.payment__badges{display:inline-block;text-transform:lowercase}.payment__badges .badge{margin-right:.25rem}.payment__discount-value{text-transform:uppercase}.payment__stamp{margin:.75rem auto 0;max-width:100%}.payment__back,.payment__intermediator{color:var(--gray)}.payment__back{font-size:.85rem;padding:.15rem}.payment__back:hover{color:var(--black)}.payment__back:focus{outline:none}"]}]),t.exports=e},403:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"h",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"j",(function(){return p})),a.d(e,"k",(function(){return m})),a.d(e,"l",(function(){return h})),a.d(e,"m",(function(){return A})),a.d(e,"n",(function(){return _})),a.d(e,"o",(function(){return g}));const i={en_us:"Back to cart",pt_br:"Voltar ao carrinho"},s={en_us:"Bag",pt_br:"Sacola"},n={en_us:"Buyer",pt_br:"Comprador"},r={en_us:"Change shipping method",pt_br:"Alterar forma de envio"},o={en_us:"Contact phone",pt_br:"Telefone de contato"},c={en_us:"Continue",pt_br:"Continuar"},l={en_us:"Delivery",pt_br:"Entrega"},u={en_us:"Discount",pt_br:"Desconto"},d={en_us:"Document number",pt_br:"NÃºmero do documento"},p={en_us:"Logout",pt_br:"Sair"},m={en_us:"My account",pt_br:"Minha conta"},h={en_us:"Payment",pt_br:"Pagamento"},A={en_us:"Proceed to payment",pt_br:"Prosseguir para pagamento"},_={en_us:"Complete your registration to proceed with the purchase",pt_br:"Complete seu cadastro para prosseguir com a compra"},g={en_us:"Summary",pt_br:"Resumo"}},404:function(t,e,a){"use strict";a(310)},405:function(t,e,a){(e=a(159)(!0)).push([t.i,'.checkout__account{margin:0 auto;max-width:600px}.checkout__account>.lead{text-align:center}.checkout__app{margin:0 auto 1rem;max-width:90rem;min-height:300px}.checkout__steps{display:flex;margin-bottom:.5rem}.checkout__step{color:var(--primary-light);flex-grow:1;font-size:.85rem;padding:.35rem;position:relative;text-align:center;text-transform:uppercase}.checkout__step>small{background:var(--light);border-radius:50%;border-right:1px solid var(--primary);display:inline-block;width:1rem}.checkout__step:not(:last-child):before{color:var(--gray);content:"/";font-weight:700;position:absolute;right:0}.checkout__step--current{color:var(--secondary);font-weight:700;pointer-events:none}.checkout__step--past,.checkout__step--past:hover{color:var(--success)}.checkout__step--disabled{color:var(--gray);pointer-events:none}.checkout__step:hover{text-decoration:none}.checkout__step:focus{outline:none}.checkout__step .fa-arrow-left{opacity:.75}.checkout__step .fa-shopping-cart{color:var(--success);opacity:.5}.checkout__info{background:var(--light)}@media(max-width:991.98px){.checkout__info{margin-top:2.5rem}}@media(min-width:992px){.checkout__info{border-left:.3rem solid var(--secondary);border-radius:.25rem 0 0 .25rem}}.checkout__back{margin-top:2rem;text-align:right}@media(max-width:575.98px){.checkout__back>.btn{display:block}}.checkout__col{padding-top:1rem}.checkout__shipping{margin-bottom:1.5rem}.checkout__shipping-method{align-items:center;background:var(--light);border-left:3px solid var(--success);border-radius:.25rem;display:flex;justify-content:space-between;margin-bottom:1rem;padding:.75rem 1rem}.checkout__shipping-method small{color:var(--gray)}.checkout .shipping-calculator__services{max-width:100%}.checkout__overlay{background:var(--body-bg);height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}.checkout__overlay.show{opacity:.5;z-index:10}.checkout__summary{display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:1rem .5rem}.checkout__loyalty-points{margin-bottom:var(--spacer-3);margin-top:var(--spacer-2)}.checkout__discount{margin-bottom:var(--spacer-4)}.checkout__user{margin-bottom:1rem}.checkout__user small{color:var(--gray)}.checkout__btn-top{display:block;margin:var(--spacer-5) auto 0}.checkout .product-card__buy{opacity:1}',"",{version:3,sources:["EcCheckout.scss"],names:[],mappings:"AAAA,mBAAmB,aAAa,CAAC,eAAe,CAAC,yBAAyB,iBAAiB,CAAC,eAAe,kBAAkB,CAAC,eAAe,CAAC,gBAAgB,CAAC,iBAAiB,YAAY,CAAC,mBAAmB,CAAC,gBAAgB,0BAA0B,CAAC,WAAW,CAAC,gBAAgB,CAAC,cAAc,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,wBAAwB,CAAC,sBAAsB,uBAAuB,CAAC,iBAAiB,CAAC,qCAAqC,CAAC,oBAAoB,CAAC,UAAU,CAAC,wCAAwC,iBAAiB,CAAC,WAAW,CAAC,eAAe,CAAC,iBAAiB,CAAC,OAAO,CAAC,yBAAyB,sBAAsB,CAAC,eAAe,CAAC,mBAAmB,CAAC,kDAAkD,oBAAoB,CAAC,0BAA0B,iBAAiB,CAAC,mBAAmB,CAAC,sBAAsB,oBAAoB,CAAC,sBAAsB,YAAY,CAAC,+BAA+B,WAAW,CAAC,kCAAkC,oBAAoB,CAAC,UAAU,CAAC,gBAAgB,uBAAuB,CAAC,2BAA2B,gBAAgB,iBAAiB,CAAC,CAAC,wBAAwB,gBAAgB,wCAAwC,CAAC,+BAA+B,CAAC,CAAC,gBAAgB,eAAe,CAAC,gBAAgB,CAAC,2BAA2B,qBAAqB,aAAa,CAAC,CAAC,eAAe,gBAAgB,CAAC,oBAAoB,oBAAoB,CAAC,2BAA2B,kBAAkB,CAAC,uBAAuB,CAAC,oCAAoC,CAAC,oBAAoB,CAAC,YAAY,CAAC,6BAA6B,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,iCAAiC,iBAAiB,CAAC,yCAAyC,cAAc,CAAC,mBAAmB,yBAAyB,CAAC,WAAW,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,wBAAwB,UAAU,CAAC,UAAU,CAAC,mBAAmB,YAAY,CAAC,qBAAqB,CAAC,WAAW,CAAC,6BAA6B,CAAC,kBAAkB,CAAC,0BAA0B,6BAA6B,CAAC,0BAA0B,CAAC,oBAAoB,6BAA6B,CAAC,gBAAgB,kBAAkB,CAAC,sBAAsB,iBAAiB,CAAC,mBAAmB,aAAa,CAAC,6BAA6B,CAAC,6BAA6B,SAAS",file:"EcCheckout.scss",sourcesContent:['.checkout__account{margin:0 auto;max-width:600px}.checkout__account>.lead{text-align:center}.checkout__app{margin:0 auto 1rem;max-width:90rem;min-height:300px}.checkout__steps{display:flex;margin-bottom:.5rem}.checkout__step{color:var(--primary-light);flex-grow:1;font-size:.85rem;padding:.35rem;position:relative;text-align:center;text-transform:uppercase}.checkout__step>small{background:var(--light);border-radius:50%;border-right:1px solid var(--primary);display:inline-block;width:1rem}.checkout__step:not(:last-child):before{color:var(--gray);content:"/";font-weight:700;position:absolute;right:0}.checkout__step--current{color:var(--secondary);font-weight:700;pointer-events:none}.checkout__step--past,.checkout__step--past:hover{color:var(--success)}.checkout__step--disabled{color:var(--gray);pointer-events:none}.checkout__step:hover{text-decoration:none}.checkout__step:focus{outline:none}.checkout__step .fa-arrow-left{opacity:.75}.checkout__step .fa-shopping-cart{color:var(--success);opacity:.5}.checkout__info{background:var(--light)}@media(max-width:991.98px){.checkout__info{margin-top:2.5rem}}@media(min-width:992px){.checkout__info{border-left:.3rem solid var(--secondary);border-radius:.25rem 0 0 .25rem}}.checkout__back{margin-top:2rem;text-align:right}@media(max-width:575.98px){.checkout__back>.btn{display:block}}.checkout__col{padding-top:1rem}.checkout__shipping{margin-bottom:1.5rem}.checkout__shipping-method{align-items:center;background:var(--light);border-left:3px solid var(--success);border-radius:.25rem;display:flex;justify-content:space-between;margin-bottom:1rem;padding:.75rem 1rem}.checkout__shipping-method small{color:var(--gray)}.checkout .shipping-calculator__services{max-width:100%}.checkout__overlay{background:var(--body-bg);height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}.checkout__overlay.show{opacity:.5;z-index:10}.checkout__summary{display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:1rem .5rem}.checkout__loyalty-points{margin-bottom:var(--spacer-3);margin-top:var(--spacer-2)}.checkout__discount{margin-bottom:var(--spacer-4)}.checkout__user{margin-bottom:1rem}.checkout__user small{color:var(--gray)}.checkout__btn-top{display:block;margin:var(--spacer-5) auto 0}.checkout .product-card__buy{opacity:1}']}]),t.exports=e},424:function(t,e,a){"use strict";var i=a(430),s=(a(6),a(105),a(26)),n=a(35),r=a(75),o=a(29),c=a(25),l=a(4),u=a(8),d=a(302);var p=a(2),m=a(383),h=a(323),A=a(268),_=a(229),g=a.n(_);const C=c.$ecomConfig.get("country_code");var f={name:"CreditCardForm",components:{InputDate:h.a,InputDocNumber:A.a,CleaveInput:g.a},props:{amount:{type:Object,required:!0},checkHolder:String,canSkipHolderInfo:Boolean,isCompany:Boolean,installmentOptions:Array,gatewayOptions:Array,gatewayOptionsLabel:String,jsClient:Object,jsClientLoad:Promise,isPayerDocRequired:{type:Boolean,default:()=>!0===window.ecomCreditCardDocRequired}},data(){return{canFormatBinInput:!1,formattedCardBin:"",cardBinSetTimer:null,card:{bin:"",name:"",date:"",cvv:"",birth:"",doc:"",installment:this.installmentOptions?1:0},canFormatExpInput:!1,rawCardExp:"",isLoadingInstallments:!1,hasLoadedInstallments:!1,loadInstallmentsTimer:null,isWaitingCardHash:!1,installmentList:[],alert:{bin:!1,date:!1,cvv:!1},isNumberValidated:!1,isNumberPotentiallyValid:!1,activeBrand:"",brands:["visa","mastercard","american-express","elo","diners-club","hiper","hipercard"],canHideHolderFields:this.canSkipHolderInfo||Boolean(this.checkHolder),loadPromise:this.jsClientLoad||Promise.resolve()}},computed:{i19aboutCvvMsg:()=>Object(n.a)(s.g),i19atSight:()=>Object(n.a)(s.s).toLowerCase(),i19bearersDocument:()=>Object(n.a)(s.v),i19birthdate:()=>Object(n.a)(s.w),i19cardNumber:()=>Object(n.a)(s.H),i19confirmPurchase:()=>Object(n.a)(s.V),i19holderName:()=>Object(n.a)(s.Pb),i19interestFree:()=>Object(n.a)(s.Ub).toLowerCase(),i19nameOnCard:()=>Object(n.a)(s.tc),i19of:()=>Object(n.a)(s.Gc).toLowerCase(),i19parcelIn:()=>Object(n.a)(s.Tc),i19securityCode:()=>Object(n.a)(s.Hd),i19validThru:()=>Object(n.a)(s.qe),lang:()=>c.$ecomConfig.get("lang"),holderName:{get(){return this.card.name},set(t){this.card.name=t.toUpperCase()}},compareName(){return this.checkHolder.replace(/(\s.*)/,"")},creditCardRegex:()=>new RegExp(Object(n.a)(s.fb),"i")},methods:{formatMoney:r.a,checkName(){if(!this.canSkipHolderInfo&&this.checkHolder){const t=this.card.name.replace(/(\s.*)/,"");""===t?this.canHideHolderFields=!0:0===t.localeCompare(this.compareName,"en",{sensitivity:"base"})?(this.canHideHolderFields=!0,this.card.doc=this.card.birth=""):this.canHideHolderFields=!1}},validateDate(){const t=this.card.date.substr(0,2),e=this.card.date.substr(2,2);return 2===e.length&&(m.expirationMonth(t).isValid&&m.expirationYear(e).isValid)},validateCvv(){return m.cvv(this.card.cvv,"american-express"!==this.activeBrand?3:4).isValid},updateInstallmentList(){const t=this.jsClient.cc_installments;t&&t.function&&this.card.bin.length>=6&&!this.loadInstallmentsTimer&&(this.loadInstallmentsTimer=setTimeout((()=>{this.loadInstallmentsTimer=null;const e=window[t.function]({number:this.card.bin,amount:this.amount.total});t.is_promise?(this.isLoadingInstallments=!0,e.then((t=>{this.installmentList=t,t.length&&(this.card.installment=1),this.hasLoadedInstallments=!0})).catch(console.error).finally((()=>{this.isLoadingInstallments=!1}))):this.installmentList=e}),200))},generateCardHash(){return this.loadPromise.then((()=>{const t=this.jsClient.cc_hash;if(t&&t.function){const{name:e,doc:a,bin:i,cvv:s,date:n}=this.card;return window[t.function]({name:e,doc:a,number:i,cvc:s,month:n.substr(0,2),year:n.substr(2,2),brand:this.activeBrand})}return""}))},emitCardData(t){const{bin:e,name:a,cvv:i,doc:s,birth:n,installment:r,address:o}=this.card,c={credit_card:{holder_name:a,last_digits:e.slice(-4),save:!0,cvv:parseInt(i,10),hash:t}};if(r&&(c.installments_number=r),o&&o.zip&&(c.billing_address=o),a&&s&&(c.payer={fullname:a,doc_number:s.replace(/\D/g,"")},n)){const t=(t,e)=>parseInt(n.substr(t,e),10);let e,a,i;"BR"===C?(e=t(0,2),a=t(2,2),i=t(4,4)):(e=t(6,2),a=t(4,2),i=t(0,4)),c.payer.birth_date={day:e,month:a,year:i}}this.$emit("checkout",c)},notifyInvalidCard(t){let e=Object(n.a)(s.Wb);"string"==typeof t&&t&&(e+=t),this.$toast({title:Object(n.a)(s.Vb),body:e})},submit(){const{alert:t}=this;if(t.bin=!this.isNumberPotentiallyValid,t.date=!this.validateDate(),t.cvv=!this.validateCvv(),t.bin||t.date||t.cvv)this.notifyInvalidCard();else{const t=this.$el;t.checkValidity()&&this.validateDate()&&this.validateCvv()&&(this.jsClient?(this.isWaitingCardHash=!0,this.generateCardHash().then(this.emitCardData).catch((t=>{console.error(t),this.notifyInvalidCard(t.userMsg)})).finally((()=>{this.isWaitingCardHash=!1}))):this.emitCardData()),t.classList.add("was-validated")}}},watch:{installmentOptions:{handler(t){t&&(this.installmentList=t.concat().sort(((t,e)=>t.number-e.number)))},immediate:!0},formattedCardBin(t){1===t.length&&(this.card.bin||(this.canFormatBinInput=!0,this.$nextTick((()=>{const t=this.$refs.binInput.$el;t.focus(),setTimeout((()=>{t.setSelectionRange(1,1)}),10)})))),this.cardBinSetTimer||t.replace(/\D/g,"")===this.card.bin||(this.cardBinSetTimer=setTimeout((()=>{this.cardBinSetTimer=null,this.card.bin=this.formattedCardBin.replace(/\D/g,"")}),200))},"card.bin"(t){this.isNumberValidated=this.isNumberPotentiallyValid=!1;const e=m.number(t);e.isPotentiallyValid&&e.card?(this.activeBrand!==e.card.type?(this.activeBrand=e.card.type,this.activeBrand&&(this.hasLoadedInstallments=!1,this.$nextTick(this.updateInstallmentList))):this.hasLoadedInstallments||this.isLoadingInstallments||this.$nextTick(this.updateInstallmentList),e.isValid?this.isNumberValidated=this.isNumberPotentiallyValid=!0:this.isNumberPotentiallyValid=e.isPotentiallyValid):this.activeBrand=""},rawCardExp(t){1===t.length&&(this.card.date||(this.canFormatExpInput=!0,this.$nextTick((()=>{const t=this.$refs.expInput.$el;t.focus(),setTimeout((()=>{t.setSelectionRange(1,1)}),10)})))),this.card.date=t.length>5?`${t.substr(0,2)}${t.substr(t.length-2,2)}`:t.replace("/","")},alert:{handler(){this.$el.classList.remove("was-validated")},deep:!0}},created(){this.jsClient&&!this.jsClientLoad&&(this.loadPromise=Object(d.a)(this.jsClient))},mounted(){const t=this.$el.querySelectorAll("input");for(let e=0;e<t.length;e++)if(!t[e].value){t[e].focus();break}Object(p.$)((function(){Object(p.$)('[data-toggle="popover"]').popover()}))}},y=(a(392),a(46)),b=Object(y.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"credit-card needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[a("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isWaitingCardHash,expression:"isWaitingCardHash"}],staticClass:"credit-card__loading"},[a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])])]),t.gatewayOptions&&t.gatewayOptions.length?a("div",{staticClass:"form-group"},[t.gatewayOptionsLabel?a("label",{attrs:{for:"credit-card-gateway"}},[t._v(" "+t._s(t.gatewayOptionsLabel)+" ")]):t._e(),a("select",{staticClass:"custom-select",attrs:{id:"credit-card-gateway",required:""},on:{change:function(e){return t.$emit("select-gateway",t.gatewayOptions[e.target.value])}}},[t.gatewayOptionsLabel?a("option",{attrs:{value:""}},[t._v("--")]):t._e(),t._l(t.gatewayOptions,(function(e,i){var s=e.label;return a("option",{domProps:{value:i}},[t._v(" "+t._s(s.replace(t.creditCardRegex,""))+" ")])}))],2)]):t._e(),a("div",{staticClass:"form-group credit-card__bin"},[a("label",{attrs:{for:"credit-card-bin"}},[t._v(" "+t._s(t.i19cardNumber)+" ")]),a("div",{staticClass:"input-group"},[t.canFormatBinInput?a("cleave-input",{ref:"binInput",staticClass:"form-control",class:!t.isNumberPotentiallyValid&&t.alert.bin?"is-invalid":null,attrs:{type:"tel",id:"credit-card-bin",raw:!1,options:{creditCard:!0},autocomplete:"off",required:""},on:{blur:function(e){t.alert.bin=t.card.bin&&!t.isNumberPotentiallyValid}},model:{value:t.formattedCardBin,callback:function(e){t.formattedCardBin=e},expression:"formattedCardBin"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.formattedCardBin,expression:"formattedCardBin"}],staticClass:"form-control",class:!t.isNumberPotentiallyValid&&t.alert.bin?"is-invalid":null,attrs:{type:"tel",autocomplete:"cc-number",required:""},domProps:{value:t.formattedCardBin},on:{blur:function(e){t.alert.bin=t.card.bin&&!t.isNumberPotentiallyValid},input:function(e){e.target.composing||(t.formattedCardBin=e.target.value)}}}),t.activeBrand&&t.brands.indexOf(t.activeBrand)>-1?a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"pay-icon",class:"pay-icon--"+t.activeBrand})])]):t._e()],1)]),a("div",{staticClass:"form-group credit-card__name"},[a("label",{attrs:{for:"credit-card-name"}},[t._v(" "+t._s(t.i19holderName)+" ")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.name,expression:"card.name"}],staticClass:"form-control",attrs:{type:"text",pattern:"[^\\d\\s]{3,}.*",id:"credit-card-name",placeholder:t.i19nameOnCard,autocomplete:"cc-name",required:""},domProps:{value:t.card.name},on:{change:t.checkName,input:function(e){e.target.composing||t.$set(t.card,"name",e.target.value)}}})])]),a("transition",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp position-absolute"}},[t.canHideHolderFields?t._e():a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-birth"}},[t._v(" "+t._s(t.i19birthdate)+" ")]),a("input-date",{attrs:{id:"credit-card-birth",required:t.isPayerDocRequired},model:{value:t.card.birth,callback:function(e){t.$set(t.card,"birth",e)},expression:"card.birth"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-doc"}},[t._v(" "+t._s(t.i19bearersDocument)+" ")]),a("input-doc-number",{attrs:{id:"credit-card-doc","is-company":t.isCompany,required:t.isPayerDocRequired},model:{value:t.card.doc,callback:function(e){t.$set(t.card,"doc",e)},expression:"card.doc"}})],1)])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"credit-card-validate"}},[t._v(" "+t._s(t.i19validThru)+" ")]),t.canFormatExpInput?a("cleave-input",{ref:"expInput",staticClass:"form-control",class:t.alert.date?"is-invalid":null,attrs:{type:"tel",id:"credit-card-validate",placeholder:"mm/"+("pt_br"===t.lang?"aa":"yy"),options:{date:!0,datePattern:["m","y"]},autocomplete:"off",required:""},on:{blur:function(){t.alert.date=t.card.date&&!t.validateDate()}},model:{value:t.rawCardExp,callback:function(e){t.rawCardExp=e},expression:"rawCardExp"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.rawCardExp,expression:"rawCardExp"}],staticClass:"form-control",class:t.alert.date?"is-invalid":null,attrs:{type:"tel",placeholder:"mm/"+("pt_br"===t.lang?"aa":"yy"),autocomplete:"cc-exp",required:""},domProps:{value:t.rawCardExp},on:{blur:function(){t.alert.date=t.card.date&&!t.validateDate()},input:function(e){e.target.composing||(t.rawCardExp=e.target.value)}}})],1),a("div",{staticClass:"form-group col-lg-6"},[a("label",{attrs:{for:"credit-card-cvv"}},[t._v(" CVV "),t._m(0)]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.card.cvv,expression:"card.cvv"}],staticClass:"form-control",class:t.alert.cvv?"is-invalid":null,attrs:{type:"tel",id:"credit-card-cvv",pattern:"\\d{3,4}",placeholder:"123",autocomplete:"cc-csc",required:""},domProps:{value:t.card.cvv},on:{blur:function(){t.alert.cvv=t.card.cvv&&!t.validateCvv()},input:function(e){e.target.composing||t.$set(t.card,"cvv",e.target.value)}}})])]),t.installmentList.length||t.isLoadingInstallments?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"credit-card-installment"}},[t._v(" "+t._s(t.i19parcelIn)+" ")]),a("transition-group",{attrs:{"enter-active-class":"animated fadeInDown","leave-active-class":"d-none"}},[t.isLoadingInstallments?a("div",{key:"loading",staticClass:"mx-2 spinner-grow",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.card.installment,expression:"card.installment"}],key:"installments",staticClass:"custom-select",attrs:{id:"credit-card-installment"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.card,"installment",e.target.multiple?a:a[0])}}},[a("option",{domProps:{value:1}},[t._v(" "+t._s(t.formatMoney(t.amount.total))+" "+t._s(t.i19atSight)+" ")]),t._l(t.installmentList,(function(e){var i=e.number,s=e.value,n=e.tax;return i>1?a("option",{domProps:{value:i}},[t._v(" "+t._s(i+"x "+t.i19of+" "+t.formatMoney(s))+" "),n?t._e():[t._v(" "+t._s(t.i19interestFree)+" ")]],2):t._e()}))],2)])],1):t._e(),a("button",{staticClass:"btn btn-lg btn-block btn-success",attrs:{type:"submit"}},[a("i",{staticClass:"i-lock mr-1"}),t._v(" "+t._s(t.i19confirmPurchase)+" ")])],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"text-muted",attrs:{title:t.i19securityCode,"data-container":"body","data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":t.i19aboutCvvMsg}},[a("i",{staticClass:"i-question-circle"})])}],!1,null,null,null),v={name:"PaymentMethods",components:{CreditCardForm:b.exports},props:{amount:{type:Object,required:!0},cartItems:Array,customer:Object,paymentGateways:{type:Array,default:()=>window.ecomPaymentGateways||[]},defaultAppId:{type:Number,default:()=>window.ecomDefaultPaymentApp},appsSort:{type:Array,default:()=>window.ecomPaymentApps||[]},canUpdateGateways:{type:Boolean,default:!(window.ecomPaymentGateways&&window.ecomPaymentGateways.length)},canGroupRecurrentGateways:{type:Boolean,default:!1!==window.ecomGroupRecurrentGateways},ecomCart:{type:Object,default:()=>u.a}},data:()=>({isWaiting:!1,fetching:null,processingAppId:void 0,hasLoaded:!1,selectedGateway:-1,loadedClients:{}}),computed:{i19anyPaymentMethodMsg:()=>Object(n.a)(s.q),i19changePaymentMethod:()=>Object(n.a)(s.K),i19chooseSubscriptionPeriod:()=>Object(n.a)(s.M),i19checkout:()=>Object(n.a)(s.L),i19generateBillet:()=>Object(n.a)(s.Jb),i19interestFree:()=>Object(n.a)(s.Ub),i19ofDiscount:()=>Object(n.a)(s.Hc),i19onFreight:()=>Object(n.a)(s.Kc),i19recurrent:()=>Object(n.a)(s.md),i19subscription:()=>Object(n.a)(s.Yd),i19total:()=>Object(n.a)(s.fe),i19tryAgain:()=>Object(n.a)(s.ie),i19upTo:()=>Object(n.a)(s.oe),items(){return this.cartItems||this.ecomCart.data.items},paymentGateway(){return this.paymentGateways[this.selectedGateway]||{}},jsClient(){return this.paymentGateway.js_client},jsClientLoad(){const{amount:t,customer:e,items:a,loadedClients:i,selectedGateway:r}=this;return t.total?i[r].then((i=>{this.$refs.gatewayContainer&&(this.$refs.gatewayContainer.innerHTML=this.jsClient.container_html);const o=i({amount:t,customer:e,items:a}),c=this.jsClient.transaction_promise;if(c&&r===this.selectedGateway)try{window[c].then(this.checkout).catch((t=>{console.error(t),this.$toast({title:Object(n.a)(s.Uc),body:Object(n.a)(s.Vc),variant:"danger"})}))}catch(t){console.error(t)}return o})):Promise.resolve()},canShowGatewayIcon(){return-1===this.selectedGateway||!this.jsClient||!this.jsClient.container_html},shouldUseCardForm(){switch(this.paymentGateway.payment_method.code){case"credit_card":return!0;case"debit_card":case"balance_on_intermediary":return Boolean(this.jsClient)}return!1},cardFormGatewayOptions(){return"recurrence"===this.paymentGateway.type&&this.canGroupRecurrentGateways?this.paymentGateways.filter((t=>{let{type:e}=t;return"recurrence"===e})):null},isCompany(){return this.customer&&"p"!==this.customer.registry_type},customerName(){return this.customer&&this.customer.name&&this.customer.name.given_name}},methods:{formatMoney:r.a,checkListedGateway(t,e){if("loyalty_points"!==t.payment_method.code){if(this.canGroupRecurrentGateways){const a=t=>"recurrence"===t.type&&"credit_card"===t.payment_method.code;if(a(t))return e===this.paymentGateways.findIndex((t=>a(t)))}return!0}return!1},checkShownGateway(t,e){return-1===this.selectedGateway||this.selectedGateway===e||this.canGroupRecurrentGateways&&"recurrence"===t.type&&"recurrence"===this.paymentGateway.type},gatewayIcon(t){switch(t.payment_method.code){case"credit_card":return"credit-card";case"banking_billet":return"barcode"}return"money-check"},installmentOption(t){let e;return t.installment_options&&t.installment_options.forEach((t=>{(!e||!t.tax&&e.tax||t.tax===e.tax&&t.number>e.number)&&(e=t)})),e},setupGatewayClient(t,e){const a=t.js_client;a&&(this.loadedClients[e]=Object(d.a)(a,!0))},postHandleGateways(){this.paymentGateways.forEach(this.setupGatewayClient),!this.hasLoaded&&this.paymentGateways.length&&(this.hasLoaded=!0,this.defaultAppId&&-1===this.selectedGateway&&(this.selectedGateway=this.paymentGateways.findIndex((t=>t.app_id===this.defaultAppId))))},parsePaymentOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,{paymentGateways:a}=this;var i,s;e||(a=[],this.loadedClients={}),t.length&&(Array.isArray(this.appsSort)&&this.appsSort.length&&(i=t,s=this.appsSort,i.sort(((t,e)=>{if(t.app_id===e.app_id)return 0;const a=s.indexOf(t.app_id),i=s.indexOf(e.app_id);return a>-1?i>-1?a<i?-1:1:a>-1?-1:1:i>-1?1:0}))),t.forEach((t=>{const{validated:i,error:s,response:n}=t;i&&!s&&n.payment_gateways.forEach((i=>{const s={app_id:t.app_id,installment_option:this.installmentOption(i),...i};e?(this.setupGatewayClient(s,this.selectedGateway),a[this.selectedGateway]=s,e=!1):"recurrence"!==s.type?a.push(s):a.unshift(s)}))}))),this.$emit("update:payment-gateways",a)},fetchPaymentGateways(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="/list_payments.json";const{items:i}=this,s=this.amount?{...this.amount}:{};"number"!=typeof s.subtotal&&(s.total=s.subtotal=i.reduce(((t,e)=>t+Object(o.a)(e)*e.quantity),0),s.freight&&(s.total+=s.freight),s.discount&&(s.total-=s.discount));const n={items:i,amount:s,domain:window.location.hostname,can_fetch_when_selected:!0,currency_id:i[0].currency_id||c.$ecomConfig.get("currency"),currency_symbol:i[0].currency_symbol||c.$ecomConfig.get("currency_symbol")};if(!e&&this.customer){n.customer={};for(const t in this.customer){const e=this.customer[t];e&&("object"!=typeof e||Object.keys(e).length)&&(n.customer[t]=e)}}t>0&&(a+=`?app_id=${t}`,this.paymentGateway.payment_method&&(n.payment_method=this.paymentGateway.payment_method)),this.isWaiting&&this.processingAppId===t||(this.isWaiting=!0,this.processingAppId=t,setTimeout((()=>{this.fetching=Object(l.c)({url:a,method:"POST",data:n}).then((e=>{let{data:a}=e;this.parsePaymentOptions(a.result,Boolean(t&&this.selectedGateway>=0))})).catch((a=>{console.error(a),e||setTimeout((()=>{this.fetchPaymentGateways(t,!0)}),a.response&&400===a.response.status?50:500)})).finally((()=>{this.isWaiting=!1}))}),t?5:50))},onCardFormSelectGateway(t){this.selectedGateway=this.paymentGateways.findIndex((e=>t===e))},handleCheckout(){this.jsClient&&this.jsClient.transaction_promise&&this.jsClientLoad.toString()||this.checkout()},checkout(t){this.$emit("checkout",{...this.paymentGateway,...t})}},watch:{selectedGateway:{handler(t){const{paymentGateway:e,loadedClients:a}=this,i=()=>{this.$emit("select-gateway",e),e.fetch_when_selected&&this.fetchPaymentGateways(e.app_id)};a[t]?a[t].then(i):i()},immediate:!0},paymentGateways:{handler(t){t.length&&this.postHandleGateways()},immediate:!0},"amount.total"(t,e){(t&&!e||Math.abs(t-e)>.1)&&-1===this.selectedGateway&&this.canUpdateGateways&&(this.isWaiting?this.fetching.then(this.fetchPaymentGateways):this.fetchPaymentGateways())}},created(){this.paymentGateways.length||this.fetchPaymentGateways()}},B=v,w=(a(394),Object(y.a)(B,i.a,i.b,!1,null,null,null));e.a=w.exports},427:function(t,e,a){"use strict";var i=a(26),s=a(35),n=a(75),r=a(28),o=a(162),c={name:"PointsApplier",props:{pointsPrograms:Object,pointsApplied:{type:Object,required:!0},pointsAmount:Number,maxPointsAmount:Number,ecomPassport:{type:Object,default:()=>r.a}},data(){return{localPointsPrograms:this.pointsPrograms||{},availablePoints:{}}},computed:{i19use$1LoyaltyPoints:()=>Object(s.a)(i.pe)},methods:{formatMoney:n.a,updatePrograms(t){t&&Object.keys(t).length&&(this.localPointsPrograms=t,this.$emit("update:points-programs",t),this.$nextTick(this.fixAvailablePoints))},fixAvailablePoints(){const t=this.ecomPassport.getCustomer().loyalty_points_entries;this.availablePoints=t?t.reduce(((t,e)=>{const a=e.valid_thru;if(!a||new Date(a).getTime()>=Date.now()){const a=e.program_id,i=e.active_points;if(this.localPointsPrograms[a]){t[a]?t[a]+=i:t[a]=i,t[a]>e.max_points&&(t[a]=e.max_points);const{ratio:s}=this.localPointsPrograms[a];t[a]*s>this.maxPointsAmount&&(t[a]=this.maxPointsAmount/s)}}return t}),{}):{}},getPointsAmount(t){return this.availablePoints[t]*this.localPointsPrograms[t].ratio},togglePoints(t,e){const a={};e&&(a[t]=this.availablePoints[t]),this.$emit("update:points-applied",a);let i=0;for(t in a)i+=this.getPointsAmount(t);this.$emit("update:points-amount",i)}},created(){this.pointsPrograms&&Object.keys(this.pointsPrograms).length?this.fixAvailablePoints():Object(o.a)("list_payments","loyalty_points_programs").then(this.updatePrograms),this.ecomPassport.on("login",this.fixAvailablePoints),this.$once("hook:beforeDestroy",(()=>{this.ecomPassport.off("login",this.fixAvailablePoints)}))}},l=a(46),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"points-applier"},t._l(t.localPointsPrograms,(function(e,i){var s=e.name;return t.availablePoints[i]>=.1?a("div",{staticClass:"custom-control custom-switch"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"points-applier-"+i},domProps:{checked:t.pointsApplied[i]},on:{change:function(e){return t.togglePoints(i,e.target.checked)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"points-applier-"+i}},[a("span",{staticClass:"badge badge-info"},[t._v(" -"+t._s(t.formatMoney(t.getPointsAmount(i)))+" ")]),t._v(" "+t._s(t.i19use$1LoyaltyPoints.replace("$1",t.availablePoints[i].toFixed(1)))+" "),a("em",[t._v(t._s(s))])])]):t._e()})),0)}),[],!1,null,null,null);e.a=u.exports},448:function(t,e,a){"use strict";a.r(e);a(6),a(96);var i=a(26),s=a(35),n=a(4),r=a(8),o=a(28),c=a(27),l=a(106),u=a(157),d=a(429),p=a(276),m=(a(404),a(46)),h={name:"checkout",components:{EcCheckout:Object(m.a)(p.a,d.a,d.b,!1,null,null,null).exports},data:()=>({updateInterval:null,ecomPassport:null,checkoutStep:0,skipShippingApps:[]}),computed:{...Object(l.c)(["amount","shippingService","shippingZipCode","selectedAddress"]),cart:()=>r.a.data,checkoutMode(){const{mode:t}=this.$route.params;return t?t.toLowerCase():null},isLpCheckout(){return"lp"===this.checkoutMode},isGuestCheckout(){return this.isLpCheckout?"object"!=typeof window||void 0===window.ecomGuestCheckout||Boolean(window.ecomGuestCheckout):"guest"===this.checkoutMode},customer:{get(){return this.$store.getters.customer},set(t){if(this.setCustomer(t),t._id){const{ecomPassport:t}=this;t&&t.checkAuthorization()&&this.saveCustomer({ecomPassport:t})}}},discountCoupon:{get(){return this.$store.getters.discountCoupon},set(t){this.setDiscountCoupon(t)}},shippingService:{get(){return this.$store.getters.shippingService},set(t){this.selectShippingService(t)}},paymentGateway:{get(){return this.$store.getters.paymentGateway},set(t){this.selectPaymentGateway(t)}},notes:{get(){return this.$store.getters.notes},set(t){this.setNotes(t)}}},methods:{...Object(l.d)(["triggerLoading","setFluidPage","setDiscountCoupon","setDiscountRule","setNotes","selectShippingService","selectPaymentGateway","setCustomer","selectAddress","addOrder"]),...Object(l.b)(["fetchCartItems","fetchCustomer","saveCustomer","sendCheckout"]),login(t){this.ecomPassport=t,this.triggerLoading(!0),this.fetchCustomer({ecomPassport:t}).finally((()=>this.triggerLoading(!1)))},checkout(t){const{customer:e}=this;this.triggerLoading(!0),this.sendCheckout({customer:e,transaction:t}).then((t=>{this.addOrder(t),this.$router.push({name:"confirmation",params:{id:t._id,number:t.number}})})).catch((t=>{if(t.response){const{data:e}=t.response;if(e&&"CKT901"===e.error_code)return this.$toast({title:Object(s.a)(i.vb),body:Object(s.a)(e.user_message),variant:"warning"}),void this.skipShippingApps.push(this.shippingService.app_id)}this.$toast({title:Object(s.a)(i.Uc),body:Object(s.a)(i.Vc),variant:"danger"})})).finally((()=>this.triggerLoading(!1)))}},watch:{checkoutStep(t,e){this.$router.push({params:{step:t}}),t&&!e&&this.setFluidPage(!0)}},created(){if(!this.isLpCheckout){const t=t=>this.fetchCartItems({removeOnError:!0,items:t}),e=e=>{let{item:a}=e;t([a])};r.a.on("addItem",e);const a=t=>{let{data:e}=t;e.items.length||this.$router.push({name:"cart"})};this.updateInterval=setInterval(t,6e5),this.triggerLoading(!0),t().then((()=>{r.a.data.flags||(r.a.data.flags=[]),-1===r.a.data.flags.indexOf("open-checkout")&&r.a.data.flags.push("open-checkout");const t=()=>{o.a.checkAuthorization()?Object(u.c)():o.a.once("login",t)};setTimeout(t,300)})).finally((()=>{this.triggerLoading(!1),a(r.a),r.a.on("change",a)})),this.$once("hook:beforeDestroy",(()=>{r.a.off("addItem",e),r.a.off("change",a)}))}},mounted(){var t=this;if(this.isLpCheckout){const e=this.$route.params.product;if(e){this.triggerLoading(!0);const i=function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(n.g)({url:`/products/${e}.json`,axiosConfig:{timeout:6e3}}).then((e=>{let{data:i}=e;r.a.clear();let s=!1;const n=["variations","customizations","kit_composition"];for(let t=0;t<n.length;t++){const e=i[n[t]];if(e&&e.length){s=!0;break}}return s||r.a.addProduct(i),Promise.all([a.e(2),a.e(3)]).then(a.bind(null,266)).then((e=>{t.setFluidPage(!0),new c.a({render:t=>t(e.default,{props:{product:i,headingTag:"h3",galleryColClassName:"col-12 order-last mt-3",canAddToCart:s,hasBuyButton:s,isQuickview:!0}})}).$mount(t.$refs.product)}))})).catch((t=>{console.error(t),s||setTimeout((()=>i(!0)),800)})).finally((()=>t.triggerLoading(!1)))};i()}}},destroyed(){this.selectPaymentGateway(null),this.setFluidPage(!1),clearInterval(this.updateInterval)}},A=h,_=Object(m.a)(A,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"checkout"}},[a("div",{staticClass:"row"},[t.isLpCheckout?a("div",{staticClass:"col-lg-4",class:t.cart.items.length?null:"offset-lg-4"},[a("div",{ref:"product"})]):t._e(),!t.isLpCheckout||t.cart.items.length?a("div",{staticClass:"col"},[a("ec-checkout",{attrs:{"is-guest-checkout":t.isGuestCheckout,"can-recommend-items":!t.isLpCheckout,"can-hide-summary":t.isLpCheckout,amount:t.amount,"checkout-step":t.checkoutStep,customer:t.customer,"shipping-zip-code":t.shippingZipCode,"shipping-service":t.shippingService,"skip-shipping-apps":t.skipShippingApps,"payment-gateway":t.paymentGateway,"discount-coupon":t.discountCoupon,notes:t.notes},on:{"update:checkoutStep":function(e){t.checkoutStep=e},"update:checkout-step":function(e){t.checkoutStep=e},login:t.login,"update:customer":function(e){t.customer=e},"address-selected":t.selectAddress,"update:shippingService":function(e){t.shippingService=e},"update:shipping-service":function(e){t.shippingService=e},"update:paymentGateway":function(e){t.paymentGateway=e},"update:payment-gateway":function(e){t.paymentGateway=e},"update:discountCoupon":function(e){t.discountCoupon=e},"update:discount-coupon":function(e){t.discountCoupon=e},"update:notes":function(e){t.notes=e},"set-discount-rule":t.setDiscountRule,checkout:t.checkout}})],1):t._e()]),t.isLpCheckout?a("div",[a("div",{ref:"description"})]):t._e()])}),[],!1,null,null,null);e.default=_.exports}}]);